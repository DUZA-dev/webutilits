# WebUtilits - Filesharing

[![Build Status](https://travis-ci.org/joemccann/dillinger.svg?branch=master)](https://travis-ci.org/joemccann/dillinger)

Приложение представляет из себя файлообменник с функциями автоматического удаления файлов после завершения периода их хранения, удаления по паролю и двух счетчиков, загрузок и просмотров.

# upload

Отвечает за загрузку файла, принимает два типа запросов, GET и POST.

- **GET** запросы - рендерят страницу загрузки файла, с помощью шаблонного препроцессора *Django Templates*.
- **POST** запросы должны исходить от формы, расположенной на странице, которую вернул предыдущий GET запрос. Форма проходит проверки на правильно введенные данные и сериализуется в модель, обрабатывается еще несколько данных (Дата удаления, IP создателя записи и имя файла), после чего запись сохраняется в БД. За тем вызывается функция, которая создаёт фоновое отложенное событие удаления данных по окончанию заданного срока жизни файла. По окончанию работы, так же рендериться страница загрузки файла, но вместе с абсолютным путём до места расположения файла на сайте.

# file

Рендерит страницу файла, и инкрементирует счетчик.

# checkPassword

Проверяет тип запроса, разрешая только POST, проверяет существование файла к которому был введен пароль и правильность введенного пароля. В случае успеха - возвращает запись из БД, объекта File.

# download

Возвращает файл пользователю на загрузку, инкрементирует счетчик загрузок.

# delete

Удаляет файл, если к нему есть пароль на удаление и он введен правильно.
